# 小杰API后台管理系统
 当前版本：1.0.7

 ### 安装教程
 注意事项：
1.PHP版本要求=>5.6
2.需要安装SG11加密组件
3.部分用户登录后台出现“签名校验失败，错误码：Error time！”请检查服务器时间是否正确！

如果您不是使用宝塔或kangle，请看这里：如果可以设置运行目录，那就使用宝塔安装教程(推荐)[当然，使用kangle安装教程也可以]。如果不能，使用kangle安装教程

敬告：安装顺序不建议颠倒，以免带来不必要的问题！

## 安装说明(宝塔)：

1.上传源码
2.打开域名，点击安装。
3.输入数据库配置信息，安装。
4.设置运行目录(推荐)
5.设置伪静态
6.登录后台

## 安装说明(kangle)：

1.上传源码
2.打开域名，点击安装。
3.输入数据库配置信息，安装。
4.设置伪静态
5.登录后台
默认账号/密码：admin/123456

### 伪静态
## nginx伪静态
```
if (!-e $request_filename) {
   rewrite ^/(.*)$ /index.php?q=$1 last;
}
```
## apache伪静态
```
<IfModule mod_rewrite.c>
 RewriteEngine on
 RewriteBase /
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteRule ^(.*)$ index.php?q=$1 [QSA,PT,L]
</IfModule>
```

 ### 目录结构
 ```
 www                      WEB部署目录
├─includes               公共目录
│  ├─start               模板引擎
│  ├─lib                 模块目录
│  │  ├─function       系统核心函数
│  │  ├─plugin         系统插件
│  │  │    │
│  │  │    ├─function.php    用户自定义函数
│  │  │    ├─Api.php         Api初始化[可在此加入调用统计]
│  │  │    │
│  │  │    └─……             更多
│  │  │    
│  │  └─resource      资源解析器
│  │
│  ├─common.php          全局文件
│  ├─overall.php             核心文件
│  └─start.php               模板引擎
│
├─Appmain                    接口存放路径[可自定义]
├─install                       安装页面
├─public                       运行目录
│
├─templates                   模板存放
│  ├─admin                   后台模板
│  │     └─…                   模板名称
│  │          └─controller       控制器
│  │
│  └─index                       后台模板
│         └─…                   模板名称
│              └─controller       控制器
│                         
│
└─index.php                  安装引导页
```

### 更新日志
小杰API后台管理系统(JieAdmin)

更新日志：

v1.0.7
2021年4月15日
增加核心文件保护(禁止直接访问)
修复后台的“意见反馈”功能不需要登录可以反馈的BYG
增加自动判断运行目录

2021年4月5日
当“签名校验失败”失败时，输出失败原因！
修复“调试模式”开关不起作用

2021年4月2日
增加几套前台模板
程序基本完工！
新增接口删除功能
增加“网站日志”删除功能
修复“网站日志”分页显示错误
新增问题反馈功能
增加：apache环境自动禁用gzip压缩
修改apache伪静态规则
支持自定义接口文档地址。默认(域名/年/月/日/接口key.html)

2021年3月27日
修复在前台，访问任意文件(没有后缀)，返回主页页面的bug
[前台]控制器分离，模板可使用独立的控制器。(如果没有，则默认使用“/includes/lib/templates/extend/”下的)。详情可看模板目录下的“controller”文件夹。
修复在前端使用“include”时引入后端的文件
新增：手机端和pc端可使用不同模板
增加在线视频播放器。用于播放安装教程（视频教程已搬到“/install/mp4/”文件夹下）
新增：获取模板列表时，当前使用模板自动顶置
修复编辑接口时，接口状态显示异常

v1.0.6
2021年3月26日
增加站点维护页面。(访问前台任意页面均返回维护中的页面)
废除压缩js功能(不兼容)
如果是资源文件，优先加载资源。一定程度上优化加载速度
由于之前找不到获取昵称接口，把昵称写死。现在已换上接口
新增资源gzip压缩传输。(目前为强制性)[仅对templates下的资源文件，不包括模板]
兼容win系统宝塔
新增安装引导页。安装完成后，需要删除install文件夹
修复一些BUG

2021年3月21日
修复获取到ip的不正确
修复在没有调用量的情况下，前台主页的“今日接口调用量”显示为空
修复“联系方式”中保存的加群链接被吞的问题
修复“添加接口”中的“返回实例”有特殊字符，内容被吞
修复kengle系统登录验证码无法加载
修复kangle系统查询数据库乱码
新增网站地图，地址：域名/sitemap.xml
兼容kangle系统
新增变量销毁。在解析完模板/Api之后，把多余的变量销毁

V1.0.5
2021年3月20日
新增类文件自动加载。把类放在“/Api_mac/Api_class/”目录下。需要使用该类时会自动加载。(类文件名称和类名需要一致)
修复foreach一维数组变量为空报错

2021年3月14日
增加API自定义伪静态规则

V1.0.4
2021年3月12日
关闭“允许模板直接连接数据库”功能后，出现致命错误

2021年3月6日
修复数据库操作类的一个很严重的BUG

2021年2月24日
修复了关闭防CC功能后网站日志记录无法使用的BUG

2021年2月17日：
修复了防CC的一个bug
修复了templates文件夹下的资源重写，路径是文件夹时，返回为空的bug
新增bak(mt管理器修改文件后生成的bak文件)后缀拦截功能，防止直接访问模板文件(仅支持拦截templates文件夹下的文件)
新增html后缀拦截功能，防止直接访问模板文件(仅支持拦截templates文件夹下的文件)

2021年2月15日：
重写了模板解析
后台模板改用“光年后台模板v4”

温馨提示：1.0.3版本及以下版本已废弃

v1.0.3
公测

1.0.2
内测

v1.0.1
开始设计

